(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-244cc2f0"],{"00b4":function(e,t,c){"use strict";c("ac1f");var a=c("23e7"),s=c("da84"),n=c("c65b"),l=c("e330"),r=c("1626"),o=c("861d"),i=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),b=s.Error,d=l(/./.test);a({target:"RegExp",proto:!0,forced:!i},{test:function(e){var t=this.exec;if(!r(t))return d(this,e);var c=n(t,this,e);if(null!==c&&!o(c))throw new b("RegExp exec method returned something other than an Object or null");return!!c}})},b0c0:function(e,t,c){var a=c("83ab"),s=c("5e77").EXISTS,n=c("e330"),l=c("9bf2").f,r=Function.prototype,o=n(r.toString),i=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,b=n(i.exec),d="name";a&&!s&&l(r,d,{configurable:!0,get:function(){try{return b(i,o(this))[1]}catch(e){return""}}})},b64b:function(e,t,c){var a=c("23e7"),s=c("7b0b"),n=c("df75"),l=c("d039"),r=l((function(){n(1)}));a({target:"Object",stat:!0,forced:r},{keys:function(e){return n(s(e))}})},cc55:function(e,t,c){"use strict";c.r(t);c("b0c0"),c("b64b");var a=c("7a23"),s={class:"container"},n=Object(a["h"])("h2",{class:"my-3"},"購物車",-1),l={class:"row justify-content-center"},r={class:"col-md-6"},o={class:"table align-middle"},i=Object(a["h"])("thead",null,[Object(a["h"])("tr",null,[Object(a["h"])("th"),Object(a["h"])("th",null,"品名"),Object(a["h"])("th",{style:{width:"110px"}},"數量"),Object(a["h"])("th",null,"單價")])],-1),b=["onClick","disabled"],d={key:0,class:"spinner-grow spinner-grow-sm"},u={key:1},m={class:"input-group input-group-sm"},h={class:"text-end"},f={key:0,class:"text-success"},j={key:1},O=Object(a["h"])("td",null,"目前購物車沒有東西喔",-1),p=[O],g=Object(a["h"])("td",{colspan:"3",class:"text-end"},"總計",-1),v={class:"text-end"},y={key:0},k=Object(a["h"])("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),x={class:"text-end text-success"},w={class:"my-5 row justify-content-center"},V={class:"mb-3"},I=Object(a["h"])("label",{for:"email",class:"form-label"},"Email",-1),L={class:"mb-3"},C=Object(a["h"])("label",{for:"name",class:"form-label"},"收件人姓名",-1),E={class:"mb-3"},S=Object(a["h"])("label",{for:"tel",class:"form-label"},"收件人電話",-1),U={class:"mb-3"},$=Object(a["h"])("label",{for:"address",class:"form-label"},"收件人地址",-1),_={class:"mb-3"},q=Object(a["h"])("label",{for:"message",class:"form-label"},"留言",-1),F={class:"text-end"},P=["disabled"];function J(e,t,c,O,J,R){var G=Object(a["I"])("Field"),M=Object(a["I"])("ErrorMessage"),T=Object(a["I"])("Form");return Object(a["y"])(),Object(a["g"])("div",s,[n,Object(a["h"])("div",l,[Object(a["h"])("div",r,[Object(a["h"])("table",o,[i,Object(a["h"])("tbody",null,[J.cart.carts.length>0?(Object(a["y"])(!0),Object(a["g"])(a["a"],{key:0},Object(a["G"])(J.cart.carts,(function(e){return Object(a["y"])(),Object(a["g"])("tr",{key:e.id},[Object(a["h"])("td",null,[Object(a["h"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(t){return R.deleteCartItem(e.id)},disabled:J.isLoadingItem===e.id},[J.isLoadingItem===e.id?(Object(a["y"])(),Object(a["g"])("span",d)):(Object(a["y"])(),Object(a["g"])("span",u,"x"))],8,b)]),Object(a["h"])("td",null,Object(a["L"])(e.product.title),1),Object(a["h"])("td",null,[Object(a["h"])("div",m,Object(a["L"])(e.qty)+" / "+Object(a["L"])(e.product.unit),1)]),Object(a["h"])("td",h,[J.cart.final_total!==J.cart.total?(Object(a["y"])(),Object(a["g"])("small",f,"折扣價：")):Object(a["f"])("",!0),Object(a["j"])(" "+Object(a["L"])(e.final_total),1)])])})),128)):(Object(a["y"])(),Object(a["g"])("tr",j,p))]),Object(a["h"])("tfoot",null,[Object(a["h"])("tr",null,[g,Object(a["h"])("td",v,Object(a["L"])(J.cart.total),1)]),J.cart.final_total!==J.cart.total?(Object(a["y"])(),Object(a["g"])("tr",y,[k,Object(a["h"])("td",x,Object(a["L"])(J.cart.final_total),1)])):Object(a["f"])("",!0)])])])]),Object(a["h"])("div",w,[Object(a["k"])(T,{ref:"form",class:"col-md-6",onSubmit:R.createOrder},{default:Object(a["U"])((function(e){var c=e.errors;return[Object(a["h"])("div",V,[I,Object(a["k"])(G,{id:"email",name:"email",type:"email",class:Object(a["s"])(["form-control",{"is-invalid":c["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:J.form.user.email,"onUpdate:modelValue":t[0]||(t[0]=function(e){return J.form.user.email=e})},null,8,["class","modelValue"]),Object(a["k"])(M,{name:"email",class:"invalid-feedback"})]),Object(a["h"])("div",L,[C,Object(a["k"])(G,{id:"name",name:"姓名",type:"text",class:Object(a["s"])(["form-control",{"is-invalid":c["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:J.form.user.name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return J.form.user.name=e})},null,8,["class","modelValue"]),Object(a["k"])(M,{name:"姓名",class:"invalid-feedback"})]),Object(a["h"])("div",E,[S,Object(a["k"])(G,{id:"tel",name:"電話",type:"text",class:Object(a["s"])(["form-control",{"is-invalid":c["電話"]}]),placeholder:"請輸入電話",rules:R.isPhone,modelValue:J.form.user.tel,"onUpdate:modelValue":t[2]||(t[2]=function(e){return J.form.user.tel=e})},null,8,["class","rules","modelValue"]),Object(a["k"])(M,{name:"電話",class:"invalid-feedback"})]),Object(a["h"])("div",U,[$,Object(a["k"])(G,{id:"address",name:"地址",type:"text",class:Object(a["s"])(["form-control",{"is-invalid":c["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:J.form.user.address,"onUpdate:modelValue":t[3]||(t[3]=function(e){return J.form.user.address=e})},null,8,["class","modelValue"]),Object(a["k"])(M,{name:"地址",class:"invalid-feedback"})]),Object(a["h"])("div",_,[q,Object(a["V"])(Object(a["h"])("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":t[4]||(t[4]=function(e){return J.form.message=e})},null,512),[[a["P"],J.form.message]])]),Object(a["h"])("div",F,[Object(a["h"])("button",{type:"submit",class:"btn btn-danger",disabled:0===J.cart.carts.length||Object.keys(c).length>0}," 送出訂單 ",8,P)])]})),_:1},8,["onSubmit"])])])}c("99af"),c("ac1f"),c("00b4");var R=c("cfb9"),G={name:"Cart",data:function(){return{cart:{carts:[]},isLoadingItem:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{getCart:function(){var e=this;this.$http.get("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("filter117","/cart")).then((function(t){e.cart=t.data.data})).catch((function(e){console.log(e.response.data)}))},deleteCartItem:function(e){var t=this;this.isLoadingItem=e,this.$http.delete("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("filter117","/cart/").concat(e)).then((function(e){alert(e.data.message),t.getCart(),R["a"].emit("get-cart"),t.isLoadingItem=""})).catch((function(e){console.log(e.response.data)}))},createOrder:function(){var e=this;this.$http.post("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("filter117","/order"),{data:this.form}).then((function(t){alert(t.data.message),e.getCart(),e.$refs.form.resetForm(),R["a"].emit("get-cart")})).catch((function(e){console.log(e.response.data)}))},isPhone:function(e){var t=/^(09)[0-9]{8}$/;return!!t.test(e)||"需要正確的電話號碼"}},mounted:function(){this.getCart()}},M=c("6b0d"),T=c.n(M);const X=T()(G,[["render",J]]);t["default"]=X}}]);
//# sourceMappingURL=chunk-244cc2f0.1cbd11dd.js.map