{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.regexp.test.js","webpack:///./node_modules/core-js/modules/es.function.name.js","webpack:///./node_modules/core-js/modules/es.object.keys.js","webpack:///./src/views/CartView.vue","webpack:///./src/views/CartView.vue?7c6d"],"names":["$","global","call","uncurryThis","isCallable","isObject","DELEGATES_TO_EXEC","execCalled","re","exec","apply","this","arguments","test","Error","un$Test","target","proto","forced","str","result","DESCRIPTORS","FUNCTION_NAME_EXISTS","EXISTS","defineProperty","f","FunctionPrototype","Function","prototype","functionToString","toString","nameRE","regExpExec","NAME","configurable","get","error","toObject","nativeKeys","fails","FAILS_ON_PRIMITIVES","stat","keys","it","class","_createElementVNode","style","_hoisted_14","colspan","for","_createElementBlock","_hoisted_2","_hoisted_6","$data","carts","length","_Fragment","key","_renderList","item","id","type","onClick","$options","disabled","_hoisted_9","_toDisplayString","product","title","qty","unit","final_total","total","_hoisted_13","_hoisted_15","_hoisted_16","_hoisted_18","_hoisted_19","_createVNode","_component_Form","ref","onSubmit","errors","_hoisted_23","_component_Field","name","placeholder","rules","user","email","$event","_component_ErrorMessage","_hoisted_25","_hoisted_27","tel","_hoisted_29","address","_hoisted_31","cols","rows","message","Object","_hoisted_33","data","cart","isLoadingItem","form","methods","getCart","$http","process","then","res","catch","err","console","log","response","deleteCartItem","delete","alert","emitter","emit","createOrder","post","$refs","resetForm","isPhone","value","phoneNumber","mounted","__exports__","render"],"mappings":"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","file":"js/chunk-244cc2f0.1cbd11dd.js","sourcesContent":["'use strict';\n// TODO: Remove from `core-js@4` since it's moved to entry points\nrequire('../modules/es.regexp.exec');\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar call = require('../internals/function-call');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\n\nvar DELEGATES_TO_EXEC = function () {\n  var execCalled = false;\n  var re = /[ac]/;\n  re.exec = function () {\n    execCalled = true;\n    return /./.exec.apply(this, arguments);\n  };\n  return re.test('abc') === true && execCalled;\n}();\n\nvar Error = global.Error;\nvar un$Test = uncurryThis(/./.test);\n\n// `RegExp.prototype.test` method\n// https://tc39.es/ecma262/#sec-regexp.prototype.test\n$({ target: 'RegExp', proto: true, forced: !DELEGATES_TO_EXEC }, {\n  test: function (str) {\n    var exec = this.exec;\n    if (!isCallable(exec)) return un$Test(this, str);\n    var result = call(exec, this, str);\n    if (result !== null && !isObject(result)) {\n      throw new Error('RegExp exec method returned something other than an Object or null');\n    }\n    return !!result;\n  }\n});\n","var DESCRIPTORS = require('../internals/descriptors');\nvar FUNCTION_NAME_EXISTS = require('../internals/function-name').EXISTS;\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar functionToString = uncurryThis(FunctionPrototype.toString);\nvar nameRE = /function\\b(?:\\s|\\/\\*[\\S\\s]*?\\*\\/|\\/\\/[^\\n\\r]*[\\n\\r]+)*([^\\s(/]*)/;\nvar regExpExec = uncurryThis(nameRE.exec);\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !FUNCTION_NAME_EXISTS) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return regExpExec(nameRE, functionToString(this))[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","var $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar nativeKeys = require('../internals/object-keys');\nvar fails = require('../internals/fails');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeKeys(1); });\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {\n  keys: function keys(it) {\n    return nativeKeys(toObject(it));\n  }\n});\n","<template>\n  <div class=\"container\">\n    <h2 class=\"my-3\">購物車</h2>\n    <!-- 購物車列表 -->\n    <div class=\"row justify-content-center\">\n      <div class=\"col-md-6\">\n        <table class=\"table align-middle\">\n          <thead>\n            <tr>\n              <th></th>\n              <th>品名</th>\n              <th style=\"width: 110px\">數量</th>\n              <th>單價</th>\n            </tr>\n          </thead>\n          <tbody>\n            <template v-if=\"cart.carts.length > 0\">\n              <tr v-for=\"item in cart.carts\" :key=\"item.id\">\n                <td>\n                  <button\n                    type=\"button\"\n                    class=\"btn btn-outline-danger btn-sm\"\n                    @click=\"deleteCartItem(item.id)\"\n                    :disabled=\"isLoadingItem === item.id\"\n                  >\n                    <span\n                      class=\"spinner-grow spinner-grow-sm\"\n                      v-if=\"isLoadingItem === item.id\"\n                    ></span>\n                    <span v-else>x</span>\n                  </button>\n                </td>\n                <td>\n                  {{ item.product.title }}\n                  <!-- <div class=\"text-success\" v-if=\"item.coupon\">\n                    已套用優惠券\n                  </div> -->\n                </td>\n                <td>\n                  <div class=\"input-group input-group-sm\">\n                    {{ item.qty }} / {{ item.product.unit }}\n                  </div>\n                </td>\n                <td class=\"text-end\">\n                  <small\n                    v-if=\"cart.final_total !== cart.total\"\n                    class=\"text-success\"\n                    >折扣價：</small\n                  >\n                  {{ item.final_total }}\n                </td>\n              </tr>\n            </template>\n            <template v-else>\n              <tr>\n                <td>目前購物車沒有東西喔</td>\n              </tr></template\n            >\n          </tbody>\n          <tfoot>\n            <tr>\n              <td colspan=\"3\" class=\"text-end\">總計</td>\n              <td class=\"text-end\">{{ cart.total }}</td>\n            </tr>\n            <tr v-if=\"cart.final_total !== cart.total\">\n              <td colspan=\"3\" class=\"text-end text-success\">折扣價</td>\n              <td class=\"text-end text-success\">{{ cart.final_total }}</td>\n            </tr>\n          </tfoot>\n        </table>\n      </div>\n    </div>\n    <!-- 表單 -->\n    <div class=\"my-5 row justify-content-center\">\n      <Form\n        ref=\"form\"\n        class=\"col-md-6\"\n        v-slot=\"{ errors }\"\n        @submit=\"createOrder\"\n      >\n        <div class=\"mb-3\">\n          <label for=\"email\" class=\"form-label\">Email</label>\n          <Field\n            id=\"email\"\n            name=\"email\"\n            type=\"email\"\n            class=\"form-control\"\n            :class=\"{ 'is-invalid': errors['email'] }\"\n            placeholder=\"請輸入 Email\"\n            rules=\"email|required\"\n            v-model=\"form.user.email\"\n          ></Field>\n          <ErrorMessage name=\"email\" class=\"invalid-feedback\"></ErrorMessage>\n        </div>\n\n        <div class=\"mb-3\">\n          <label for=\"name\" class=\"form-label\">收件人姓名</label>\n          <Field\n            id=\"name\"\n            name=\"姓名\"\n            type=\"text\"\n            class=\"form-control\"\n            :class=\"{ 'is-invalid': errors['姓名'] }\"\n            placeholder=\"請輸入姓名\"\n            rules=\"required\"\n            v-model=\"form.user.name\"\n          ></Field>\n          <ErrorMessage name=\"姓名\" class=\"invalid-feedback\"></ErrorMessage>\n        </div>\n\n        <div class=\"mb-3\">\n          <label for=\"tel\" class=\"form-label\">收件人電話</label>\n          <Field\n            id=\"tel\"\n            name=\"電話\"\n            type=\"text\"\n            class=\"form-control\"\n            :class=\"{ 'is-invalid': errors['電話'] }\"\n            placeholder=\"請輸入電話\"\n            :rules=\"isPhone\"\n            v-model=\"form.user.tel\"\n          ></Field>\n          <ErrorMessage name=\"電話\" class=\"invalid-feedback\"></ErrorMessage>\n        </div>\n\n        <div class=\"mb-3\">\n          <label for=\"address\" class=\"form-label\">收件人地址</label>\n          <Field\n            id=\"address\"\n            name=\"地址\"\n            type=\"text\"\n            class=\"form-control\"\n            :class=\"{ 'is-invalid': errors['地址'] }\"\n            placeholder=\"請輸入地址\"\n            rules=\"required\"\n            v-model=\"form.user.address\"\n          ></Field>\n          <ErrorMessage name=\"地址\" class=\"invalid-feedback\"></ErrorMessage>\n        </div>\n\n        <div class=\"mb-3\">\n          <label for=\"message\" class=\"form-label\">留言</label>\n          <textarea\n            name=\"\"\n            id=\"message\"\n            class=\"form-control\"\n            cols=\"30\"\n            rows=\"10\"\n            v-model=\"form.message\"\n          ></textarea>\n        </div>\n        <div class=\"text-end\">\n          <button\n            type=\"submit\"\n            class=\"btn btn-danger\"\n            :disabled=\"\n              cart.carts.length === 0 || Object.keys(errors).length > 0\n            \"\n          >\n            送出訂單\n          </button>\n        </div>\n      </Form>\n    </div>\n  </div>\n</template>\n<script>\nimport emitter from '@/methods/emitter'\nexport default {\n  name: 'Cart',\n  data () {\n    return {\n      cart: {\n        carts: []\n      },\n      isLoadingItem: '',\n      form: {\n        user: {\n          name: '',\n          email: '',\n          tel: '',\n          address: ''\n        },\n        message: ''\n      }\n    }\n  },\n  methods: {\n    getCart () {\n      this.$http\n        .get(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`)\n        .then((res) => {\n          this.cart = res.data.data\n        })\n        .catch((err) => {\n          console.log(err.response.data)\n        })\n    },\n    deleteCartItem (id) {\n      this.isLoadingItem = id\n      this.$http\n        .delete(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${id}`\n        )\n        .then((res) => {\n          alert(res.data.message)\n          this.getCart()\n          emitter.emit('get-cart')\n          this.isLoadingItem = ''\n        })\n        .catch((err) => {\n          console.log(err.response.data)\n        })\n    },\n    createOrder () {\n      this.$http\n        .post(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/order`,\n          { data: this.form }\n        )\n        .then((res) => {\n          // console.log(res.data)\n          alert(res.data.message)\n          this.getCart()\n          this.$refs.form.resetForm()\n          emitter.emit('get-cart')\n        })\n        .catch((err) => {\n          console.log(err.response.data)\n        })\n    },\n    // Vee Validate 手機規則\n    isPhone (value) {\n      const phoneNumber = /^(09)[0-9]{8}$/\n      return phoneNumber.test(value) ? true : '需要正確的電話號碼'\n    }\n  },\n  mounted () {\n    this.getCart()\n  }\n}\n</script>\n","import { render } from \"./CartView.vue?vue&type=template&id=12ee0d0d\"\nimport script from \"./CartView.vue?vue&type=script&lang=js\"\nexport * from \"./CartView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/linchiao-jo/Desktop/OnGoing/01-六角切版/07-Vue直播班_2022/Info/week7-1/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}