(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5c14710e"],{"0902":function(t,e,c){"use strict";c.r(e);var l=c("7a23"),n={class:"container"},a=Object(l["h"])("h2",{class:"my-3"},"後台－訂單管理",-1),r={class:"table mt-4"},d=Object(l["h"])("thead",null,[Object(l["h"])("tr",null,[Object(l["h"])("th",null,"購買時間"),Object(l["h"])("th",null,"Email"),Object(l["h"])("th",null,"購買款項"),Object(l["h"])("th",null,"應付金額"),Object(l["h"])("th",null,"是否付款"),Object(l["h"])("th",null,"編輯")])],-1),o=["textContent"],b={class:"list-unstyled"},s={class:"text-right"},O={class:"form-check form-switch"},i=["id","onUpdate:modelValue","onChange"],u=["for"],h={key:0},j={key:1},p={class:"btn-group"},m=["onClick"],f=["onClick"];function y(t,e,c,y,g,k){var v=Object(l["I"])("Pagination"),x=Object(l["I"])("ModalOrder"),L=Object(l["I"])("ModalDelete");return Object(l["y"])(),Object(l["g"])(l["a"],null,[Object(l["h"])("div",n,[a,Object(l["h"])("table",r,[d,Object(l["h"])("tbody",null,[(Object(l["y"])(!0),Object(l["g"])(l["a"],null,Object(l["G"])(g.orders,(function(e){return Object(l["y"])(),Object(l["g"])(l["a"],{key:e.id},[g.orders.length?(Object(l["y"])(),Object(l["g"])("tr",{key:0,class:Object(l["s"])({"text-secondary":!e.is_paid})},[Object(l["h"])("td",null,Object(l["L"])(e.create_at),1),Object(l["h"])("td",null,[e.user?(Object(l["y"])(),Object(l["g"])("span",{key:0,textContent:Object(l["L"])(e.user.email)},null,8,o)):Object(l["f"])("",!0)]),Object(l["h"])("td",null,[Object(l["h"])("ul",b,[(Object(l["y"])(!0),Object(l["g"])(l["a"],null,Object(l["G"])(e.products,(function(t){return Object(l["y"])(),Object(l["g"])("li",{key:t.id},Object(l["L"])(t.product.title)+" 數量："+Object(l["L"])(t.qty)+" "+Object(l["L"])(t.product.unit),1)})),128))])]),Object(l["h"])("td",s,Object(l["L"])(t.$filters.currency(e.total)),1),Object(l["h"])("td",null,[Object(l["h"])("div",O,[Object(l["V"])(Object(l["h"])("input",{class:"form-check-input",type:"checkbox",id:"paidSwitch".concat(e.id),"onUpdate:modelValue":function(t){return e.is_paid=t},onChange:function(t){return k.updateOrder(e)}},null,40,i),[[l["O"],e.is_paid]]),Object(l["h"])("label",{class:"form-check-label",for:"paidSwitch".concat(e.id)},[e.is_paid?(Object(l["y"])(),Object(l["g"])("span",h,"已付款")):(Object(l["y"])(),Object(l["g"])("span",j,"未付款"))],8,u)])]),Object(l["h"])("td",null,[Object(l["h"])("div",p,[Object(l["h"])("button",{class:"btn btn-outline-primary btn-sm",type:"button",onClick:function(t){return k.openOrderModal(e)}}," 檢視 ",8,m),Object(l["h"])("button",{class:"btn btn-outline-danger btn-sm",type:"button",onClick:function(t){return k.openDelOrderModal(e)}}," 刪除 ",8,f)])])],2)):Object(l["f"])("",!0)],64)})),128))])]),Object(l["k"])(v,{pages:g.pagination,onEmitPages:k.getOrders},null,8,["pages","onEmitPages"])]),Object(l["k"])(x,{"order-data":g.tempOrder,onEmitUpdateOrder:k.updateOrder,ref:"modalOrder"},null,8,["order-data","onEmitUpdateOrder"]),Object(l["k"])(L,{"product-data":g.tempOrder,onEmitDeleteProduct:k.deleteOrder,ref:"modalDelete"},null,8,["product-data","onEmitDeleteProduct"])],64)}var g=c("5530"),k=(c("99af"),c("1799")),v=(c("b0c0"),{class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"}),x={class:"modal-dialog modal-xl",role:"document"},L={class:"modal-content border-0"},M=Object(l["h"])("div",{class:"modal-header bg-dark text-white"},[Object(l["h"])("h5",{class:"modal-title",id:"exampleModalLabel"},[Object(l["h"])("span",null,"訂單細節")]),Object(l["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),w={class:"modal-body"},D={class:"row"},_={class:"col-md-4"},C=Object(l["h"])("h3",null,"用戶資料",-1),$={class:"table"},E={key:0},P=Object(l["h"])("th",{style:{width:"100px"}},"姓名",-1),S=Object(l["h"])("th",null,"Email",-1),U=Object(l["h"])("th",null,"電話",-1),V=Object(l["h"])("th",null,"地址",-1),I={class:"col-md-8"},G=Object(l["h"])("h3",null,"訂單細節",-1),q={class:"table"},J=Object(l["h"])("th",{style:{width:"100px"}},"訂單編號",-1),F=Object(l["h"])("th",null,"下單時間",-1),T=Object(l["h"])("th",null,"付款時間",-1),X={key:0},z={key:1},A=Object(l["h"])("th",null,"付款狀態",-1),B={key:0,class:"text-success"},H={key:1,class:"text-muted"},K=Object(l["h"])("th",null,"總金額",-1),N=Object(l["h"])("h3",null,"選購商品",-1),Q={class:"table"},R=Object(l["h"])("thead",null,[Object(l["h"])("tr")],-1),W={class:"text-end"},Y={class:"d-flex justify-content-end"},Z={class:"form-check"},tt={class:"form-check-label",for:"flexCheckDefault"},et={key:0},ct={key:1},lt={class:"modal-footer"},nt=Object(l["h"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function at(t,e,c,n,a,r){return Object(l["y"])(),Object(l["g"])("div",v,[Object(l["h"])("div",x,[Object(l["h"])("div",L,[M,Object(l["h"])("div",w,[Object(l["h"])("div",D,[Object(l["h"])("div",_,[C,Object(l["h"])("table",$,[a.tempOrder.user?(Object(l["y"])(),Object(l["g"])("tbody",E,[Object(l["h"])("tr",null,[P,Object(l["h"])("td",null,Object(l["L"])(a.tempOrder.user.name),1)]),Object(l["h"])("tr",null,[S,Object(l["h"])("td",null,Object(l["L"])(a.tempOrder.user.email),1)]),Object(l["h"])("tr",null,[U,Object(l["h"])("td",null,Object(l["L"])(a.tempOrder.user.tel),1)]),Object(l["h"])("tr",null,[V,Object(l["h"])("td",null,Object(l["L"])(a.tempOrder.user.address),1)])])):Object(l["f"])("",!0)])]),Object(l["h"])("div",I,[G,Object(l["h"])("table",q,[Object(l["h"])("tbody",null,[Object(l["h"])("tr",null,[J,Object(l["h"])("td",null,Object(l["L"])(a.tempOrder.id),1)]),Object(l["h"])("tr",null,[F,Object(l["h"])("td",null,Object(l["L"])(t.$filters.date(a.tempOrder.create_at)),1)]),Object(l["h"])("tr",null,[T,Object(l["h"])("td",null,[a.tempOrder.paid_date?(Object(l["y"])(),Object(l["g"])("span",X,Object(l["L"])(t.$filters.date(a.tempOrder.paid_date)),1)):(Object(l["y"])(),Object(l["g"])("span",z,"時間不正確"))])]),Object(l["h"])("tr",null,[A,Object(l["h"])("td",null,[a.tempOrder.is_paid?(Object(l["y"])(),Object(l["g"])("strong",B,"已付款")):(Object(l["y"])(),Object(l["g"])("span",H,"尚未付款"))])]),Object(l["h"])("tr",null,[K,Object(l["h"])("td",null,Object(l["L"])(a.tempOrder.total),1)])])]),N,Object(l["h"])("table",Q,[R,Object(l["h"])("tbody",null,[(Object(l["y"])(!0),Object(l["g"])(l["a"],null,Object(l["G"])(a.tempOrder.products,(function(e){return Object(l["y"])(),Object(l["g"])("tr",{key:e.id},[Object(l["h"])("th",null,Object(l["L"])(e.product.title),1),Object(l["h"])("td",null,Object(l["L"])(e.qty)+" / "+Object(l["L"])(e.product.unit),1),Object(l["h"])("td",W,Object(l["L"])(t.$filters.currency(e.final_total)),1)])})),128))])]),Object(l["h"])("div",Y,[Object(l["h"])("div",Z,[Object(l["V"])(Object(l["h"])("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckDefault","onUpdate:modelValue":e[0]||(e[0]=function(t){return a.tempOrder.is_paid=t})},null,512),[[l["O"],a.tempOrder.is_paid]]),Object(l["h"])("label",tt,[a.tempOrder.is_paid?(Object(l["y"])(),Object(l["g"])("span",et,"已付款")):(Object(l["y"])(),Object(l["g"])("span",ct,"未付款"))])])])])])]),Object(l["h"])("div",lt,[nt,Object(l["h"])("button",{type:"button",class:"btn btn-primary",onClick:e[1]||(e[1]=function(e){return t.$emit("emit-update-order",a.tempOrder)})}," 修改付款狀態 ")])])])],512)}var rt=c("e0ae"),dt={props:["orderData"],emits:["emitUpdateOrder"],mixins:[rt["a"]],data:function(){return{tempOrder:{},bsModal:""}},watch:{orderData:function(){this.tempOrder=this.orderData}}},ot=c("6b0d"),bt=c.n(ot);const st=bt()(dt,[["render",at]]);var Ot=st,it=c("86a0"),ut={components:{Pagination:k["a"],ModalOrder:Ot,ModalDelete:it["a"]},data:function(){return{orders:[],pagination:{},tempOrder:{}}},methods:{getOrders:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.$http.get("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("filter117","/admin/orders?page=").concat(e)).then((function(e){t.orders=e.data.orders,t.pagination=e.data.pagination})).catch((function(t){console.log(t.response.data)}))},updateOrder:function(t){var e=this;this.$http.put("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("filter117","/admin/order/").concat(t.id),{data:t}).then((function(t){alert(t.data.message),e.$refs.modalOrder.closeModal(),e.getOrders()})).catch((function(t){console.log(t.response.data)}))},deleteOrder:function(t){var e=this;this.$http.delete("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("filter117","/admin/order/").concat(t)).then((function(t){alert(t.data.message),e.$refs.modalDelete.closeModal(),e.getOrders()})).catch((function(t){console.log(t.response.data)}))},openOrderModal:function(t){this.tempOrder=Object(g["a"])({},t),console.log(this.tempOrder),this.$refs.modalOrder.openModal()},openDelOrderModal:function(t){this.tempOrder=t,this.$refs.modalDelete.openModal()}},mounted:function(){this.getOrders()}};const ht=bt()(ut,[["render",y]]);e["default"]=ht},b0c0:function(t,e,c){var l=c("83ab"),n=c("5e77").EXISTS,a=c("e330"),r=c("9bf2").f,d=Function.prototype,o=a(d.toString),b=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,s=a(b.exec),O="name";l&&!n&&r(d,O,{configurable:!0,get:function(){try{return s(b,o(this))[1]}catch(t){return""}}})}}]);
//# sourceMappingURL=chunk-5c14710e.7e2add2c.js.map